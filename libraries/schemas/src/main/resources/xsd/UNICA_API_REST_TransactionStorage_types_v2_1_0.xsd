<?xml version="1.0" encoding="UTF-8"?>
<!-- October 19, 2012 -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
			xmlns:tns="http://www.telefonica.com/schemas/UNICA/REST/transactionStorage/v2_1/" 
			xmlns:uctr="http://www.telefonica.com/schemas/UNICA/REST/common/v2"
			targetNamespace="http://www.telefonica.com/schemas/UNICA/REST/transactionStorage/v2_1/" 
			elementFormDefault="qualified" attributeFormDefault="unqualified">
	
	<xsd:import namespace="http://www.telefonica.com/schemas/UNICA/REST/common/v2" schemaLocation="UNICA_API_REST_common_types_v2_0.xsd"/>


<xsd:annotation>
	<xsd:documentation>The following are the resources to be included in HTTP requests or responses</xsd:documentation>
</xsd:annotation>

	<xsd:element name="amountTransaction" type="tns:AmountTransactionType"/>
    <xsd:element name="paymentTransactionList" type="tns:PaymentTransactionListType"/>
   
<xsd:annotation>
	<xsd:documentation>The following are the types defined for each used resource</xsd:documentation>
</xsd:annotation>

   <xsd:complexType name="PaymentTransactionListType">
      <xsd:sequence>
      	<xsd:element name="amountTransaction" type="tns:AmountTransactionType" maxOccurs="unbounded" minOccurs="0"/>
        <xsd:element name="resourceURL" type="xsd:anyURI" maxOccurs="1" minOccurs="0"/>
        <xsd:element name="link" type="xsd:anyURI" maxOccurs="unbounded" minOccurs="0"/>
      </xsd:sequence>
   </xsd:complexType>
     
	<xsd:complexType name="AmountTransactionType">
      <xsd:sequence>
         <xsd:element name="endUserId" type="xsd:anyURI" maxOccurs="1" minOccurs="1"/>
         <xsd:element name="paymentAmount" type="tns:PaymentAmountType" maxOccurs="1" minOccurs="1"/>
         <xsd:element name="transactionOperationType" type="tns:TransactionOperationTypeType" maxOccurs="1" minOccurs="1"/>
         <xsd:element name="transactionOperationStatus" type="tns:TransactionOperationStatusType" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="transactionOperationStatusDescription" type="xsd:string" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="statusDate" type="xsd:dateTime" minOccurs="0"/>
         <xsd:element name="referenceCode" type="xsd:string" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="serverReferenceCode" type="xsd:string" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="originalServerReferenceCode" type="xsd:string" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="refunded" type="xsd:boolean" maxOccurs="1" minOccurs="0" default="false"/>
         <xsd:element name="captured" type="xsd:boolean" maxOccurs="1" minOccurs="0" default="false"/>
         <xsd:element name="callbackUrl" type="xsd:anyURI" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="resourceURL" type="xsd:anyURI" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="link" type="xsd:anyURI" maxOccurs="unbounded" minOccurs="0"/>
      </xsd:sequence>
   </xsd:complexType>
   
    <xsd:simpleType name="TransactionOperationTypeType">
      <xsd:restriction base="xsd:string">
        <xsd:enumeration value="Charge"/>
        <xsd:enumeration value="Refund"/>
        <xsd:enumeration value="Capture"/>
        <xsd:enumeration value="Reserve"/>
      </xsd:restriction>
   </xsd:simpleType>
   
	<xsd:simpleType name="TransactionOperationStatusType">
      <xsd:restriction base="xsd:string">
        <xsd:enumeration value="ChargeRequest"/>
        <xsd:enumeration value="RefundRequest"/>
        <xsd:enumeration value="ChargeInProgress"/>
        <xsd:enumeration value="RefundInProgress"/>
        <xsd:enumeration value="ChargedErrorRetry"/>
        <xsd:enumeration value="RefundedErrorRetry"/>
        <xsd:enumeration value="ChargedSuccessfully"/>
        <xsd:enumeration value="RefundedSuccessfully"/>
        <xsd:enumeration value="ChargedFailed"/>
        <xsd:enumeration value="RefundedFailed"/>
        <xsd:enumeration value="ChargedUncertain"/>
        <xsd:enumeration value="RefundedUncertain"/>
        <xsd:enumeration value="Processing"/>
        <xsd:enumeration value="AuthorizationInProgress"/>
        <xsd:enumeration value="Authorized"/>
        <xsd:enumeration value="Charged"/>
        <xsd:enumeration value="Refunded"/>
        <xsd:enumeration value="Credited"/>
        <xsd:enumeration value="Reserved"/>
        <xsd:enumeration value="Released"/>
        <xsd:enumeration value="Denied"/>
        <xsd:enumeration value="Refused"/>
        <xsd:enumeration value="Unauthorized"/>
        <xsd:enumeration value="Terminated"/>
        <xsd:enumeration value="CompensationInProgress"/>
        <xsd:enumeration value="Compensated"/>
        <xsd:enumeration value="ErrorRetry"/>
        <xsd:enumeration value="Uncertain"/>      
      </xsd:restriction>
   </xsd:simpleType>
 
<xsd:annotation>
	<xsd:documentation>The following are the rest of types used in the API</xsd:documentation>
</xsd:annotation>
   
   <xsd:complexType name="PaymentAmountType">
      <xsd:sequence>
         <xsd:element name="chargingInformation" type="tns:ChargingInformationType" maxOccurs="1" minOccurs="1"/>
         <xsd:element name="chargingMetaData" type="tns:ChargingMetaDataType" maxOccurs="1" minOccurs="0"/>         
         <xsd:element name="totalAmountCharged" type="xsd:decimal" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="totalAmountRefunded" type="xsd:decimal" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="totalAmountCredited" type="xsd:decimal" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="totalTaxAmount" type="xsd:decimal" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="amountReserved" type="xsd:decimal" maxOccurs="1" minOccurs="0"/>
      </xsd:sequence>
   </xsd:complexType>
   
	<xsd:complexType name="ChargingInformationType">
      <xsd:sequence>
         <xsd:element name="description" type="xsd:string" maxOccurs="unbounded" minOccurs="1"/>
         <xsd:choice>
             <xsd:sequence>
                 <xsd:element name="amount" type="xsd:decimal" minOccurs="0" />
                 <xsd:element name="taxAmount" type="xsd:decimal" minOccurs="0" />
                 <xsd:element name="totalAmount" type="xsd:decimal" minOccurs="0" />
                 <xsd:element name="currency" type="xsd:string" minOccurs="0"/>
             </xsd:sequence>
             <xsd:element name="code" type="xsd:string" />
         </xsd:choice>
      </xsd:sequence>
   </xsd:complexType>
   
   <xsd:complexType name="ChargingMetaDataType">
      <xsd:sequence>
         <xsd:element name="channel" type="xsd:string" minOccurs="0"/>
         <xsd:element name="serviceId" type="xsd:string"/>
         <xsd:element name="applicationId" type="xsd:string"/>
         <xsd:element name="productId" type="xsd:string" minOccurs="0"/>
         <xsd:element name="productClass" type="xsd:string" minOccurs="0"/>
         <xsd:element name="merchantId" type="xsd:string" minOccurs="0"/>
         <xsd:element name="operationNature" type="xsd:string" maxOccurs="1" minOccurs="0"/>
         <xsd:element name="clientDate" type="xsd:dateTime" minOccurs="0"/>
         <xsd:element name="paymentMethod" type="tns:PaymentMethodType" minOccurs="0"/>
         <xsd:element name="additionalChargingMetaData" type="uctr:ExtensionType"  minOccurs="0"/>
      </xsd:sequence>
   </xsd:complexType>
   
    <xsd:complexType name="PaymentMethodType">
        <xsd:sequence>
            <xsd:element name="type" type="tns:PaymentMethodTypeType" />
            <xsd:element name="id" type="xsd:string" minOccurs="0" />
            <xsd:element name="maskedAccountNumber" type="xsd:string"
                minOccurs="0" />
            <xsd:element name="cvv" type="xsd:string" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:simpleType name="PaymentMethodTypeEnumType">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="directToBill" />
            <xsd:enumeration value="eMoney" />
            <xsd:enumeration value="bankAccount" />
            <xsd:enumeration value="debitCard" />
            <xsd:enumeration value="creditCard" />
            <xsd:enumeration value="prepaidCard" />
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="PaymentMethodTypeType">
        <xsd:union memberTypes="tns:PaymentMethodTypeEnumType xsd:string" />
    </xsd:simpleType>
    
</xsd:schema>
